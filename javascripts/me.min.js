/*! me.min.js 2014-11-07 */
function Rainbow(){"use strict";function a(a){if(a.length<2)throw new Error("Rainbow must have two or more colours.");var f=(d-c)/(a.length-1),g=new ColourGradient;g.setGradient(a[0],a[1]),g.setNumberRange(c,c+f),b=[g];for(var h=1;h<a.length-1;h++){var i=new ColourGradient;i.setGradient(a[h],a[h+1]),i.setNumberRange(c+f*h,c+f*(h+1)),b[h]=i}e=a}var b=null,c=0,d=100,e=["ff0000","ffff00","00ff00","0000ff"];a(e),this.setSpectrum=function(){return a(arguments),this},this.setSpectrumByArray=function(b){return a(b),this},this.colourAt=function(a){if(isNaN(a))throw new TypeError(a+" is not a number");if(1===b.length)return b[0].colourAt(a);var e=(d-c)/b.length,f=Math.min(Math.floor((Math.max(a,c)-c)/e),b.length-1);return b[f].colourAt(a)},this.colorAt=this.colourAt,this.setNumberRange=function(b,f){if(!(f>b))throw new RangeError("maxNumber ("+f+") is not greater than minNumber ("+b+")");return c=b,d=f,a(e),this}}function ColourGradient(){"use strict";function a(a,c,d){var e=a;g>e&&(e=g),e>h&&(e=h);var f=h-g,i=parseInt(c,16),j=parseInt(d,16),k=(j-i)/f,l=Math.round(k*(e-g)+i);return b(l.toString(16))}function b(a){return 1===a.length?"0"+a:a}function c(a){var b=/^#?[0-9a-fA-F]{6}$/i;return b.test(a)}function d(a){if(c(a))return a.substring(a.length-6,a.length);var b=a.toLowerCase();if(i.hasOwnProperty(b))return i[b];throw new Error(a+" is not a valid colour.")}var e="ff0000",f="0000ff",g=0,h=100;this.setGradient=function(a,b){e=d(a),f=d(b)},this.setNumberRange=function(a,b){if(!(b>a))throw new RangeError("maxNumber ("+b+") is not greater than minNumber ("+a+")");g=a,h=b},this.colourAt=function(b){return a(b,e.substring(0,2),f.substring(0,2))+a(b,e.substring(2,4),f.substring(2,4))+a(b,e.substring(4,6),f.substring(4,6))};var i={aliceblue:"F0F8FF",antiquewhite:"FAEBD7",aqua:"00FFFF",aquamarine:"7FFFD4",azure:"F0FFFF",beige:"F5F5DC",bisque:"FFE4C4",black:"000000",blanchedalmond:"FFEBCD",blue:"0000FF",blueviolet:"8A2BE2",brown:"A52A2A",burlywood:"DEB887",cadetblue:"5F9EA0",chartreuse:"7FFF00",chocolate:"D2691E",coral:"FF7F50",cornflowerblue:"6495ED",cornsilk:"FFF8DC",crimson:"DC143C",cyan:"00FFFF",darkblue:"00008B",darkcyan:"008B8B",darkgoldenrod:"B8860B",darkgray:"A9A9A9",darkgreen:"006400",darkgrey:"A9A9A9",darkkhaki:"BDB76B",darkmagenta:"8B008B",darkolivegreen:"556B2F",darkorange:"FF8C00",darkorchid:"9932CC",darkred:"8B0000",darksalmon:"E9967A",darkseagreen:"8FBC8F",darkslateblue:"483D8B",darkslategray:"2F4F4F",darkslategrey:"2F4F4F",darkturquoise:"00CED1",darkviolet:"9400D3",deeppink:"FF1493",deepskyblue:"00BFFF",dimgray:"696969",dimgrey:"696969",dodgerblue:"1E90FF",firebrick:"B22222",floralwhite:"FFFAF0",forestgreen:"228B22",fuchsia:"FF00FF",gainsboro:"DCDCDC",ghostwhite:"F8F8FF",gold:"FFD700",goldenrod:"DAA520",gray:"808080",green:"008000",greenyellow:"ADFF2F",grey:"808080",honeydew:"F0FFF0",hotpink:"FF69B4",indianred:"CD5C5C",indigo:"4B0082",ivory:"FFFFF0",khaki:"F0E68C",lavender:"E6E6FA",lavenderblush:"FFF0F5",lawngreen:"7CFC00",lemonchiffon:"FFFACD",lightblue:"ADD8E6",lightcoral:"F08080",lightcyan:"E0FFFF",lightgoldenrodyellow:"FAFAD2",lightgray:"D3D3D3",lightgreen:"90EE90",lightgrey:"D3D3D3",lightpink:"FFB6C1",lightsalmon:"FFA07A",lightseagreen:"20B2AA",lightskyblue:"87CEFA",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"B0C4DE",lightyellow:"FFFFE0",lime:"00FF00",limegreen:"32CD32",linen:"FAF0E6",magenta:"FF00FF",maroon:"800000",mediumaquamarine:"66CDAA",mediumblue:"0000CD",mediumorchid:"BA55D3",mediumpurple:"9370DB",mediumseagreen:"3CB371",mediumslateblue:"7B68EE",mediumspringgreen:"00FA9A",mediumturquoise:"48D1CC",mediumvioletred:"C71585",midnightblue:"191970",mintcream:"F5FFFA",mistyrose:"FFE4E1",moccasin:"FFE4B5",navajowhite:"FFDEAD",navy:"000080",oldlace:"FDF5E6",olive:"808000",olivedrab:"6B8E23",orange:"FFA500",orangered:"FF4500",orchid:"DA70D6",palegoldenrod:"EEE8AA",palegreen:"98FB98",paleturquoise:"AFEEEE",palevioletred:"DB7093",papayawhip:"FFEFD5",peachpuff:"FFDAB9",peru:"CD853F",pink:"FFC0CB",plum:"DDA0DD",powderblue:"B0E0E6",purple:"800080",red:"FF0000",rosybrown:"BC8F8F",royalblue:"4169E1",saddlebrown:"8B4513",salmon:"FA8072",sandybrown:"F4A460",seagreen:"2E8B57",seashell:"FFF5EE",sienna:"A0522D",silver:"C0C0C0",skyblue:"87CEEB",slateblue:"6A5ACD",slategray:"708090",slategrey:"708090",snow:"FFFAFA",springgreen:"00FF7F",steelblue:"4682B4",tan:"D2B48C",teal:"008080",thistle:"D8BFD8",tomato:"FF6347",turquoise:"40E0D0",violet:"EE82EE",wheat:"F5DEB3",white:"FFFFFF",whitesmoke:"F5F5F5",yellow:"FFFF00",yellowgreen:"9ACD32"}}function shareFriend(){WeixinJSBridge.invoke("sendAppMessage",{appid:appid,img_url:imgUrl,img_width:"200",img_height:"200",link:lineLink,desc:descContent,title:shareTitle},function(){})}function shareTimeline(){WeixinJSBridge.invoke("shareTimeline",{img_url:imgUrl,img_width:"200",img_height:"200",link:lineLink,desc:descContent,title:shareTitle},function(){})}function shareWeibo(){WeixinJSBridge.invoke("shareWeibo",{content:descContent,url:lineLink},function(){})}!function(a,b){function c(b,c,d,e){var f={duration:1,animation:null,iterate:1,timing:"linear",keep:!1};this.prefixes=["","-moz-","-o-animation-","-webkit-"],this.element=a(b),this.bare=b,this.queue=[],this.listening=!1;var g="function"==typeof d?d:e;switch(c){case"blur":f={amount:3,duration:.5,focusAfter:null},this.options=a.extend(f,d),this._blur(g);break;case"focus":this._focus();break;case"rotate":f={degrees:15,duration:.5},this.options=a.extend(f,d),this._rotate(g);break;case"cleanse":this.cleanse();break;default:this.options=a.extend(f,c),this.init(g)}}c.prototype={init:function(b){var c=this;"[object Array]"===Object.prototype.toString.call(c.options.animation)?a.merge(c.queue,c.options.animation):c.queue.push(c.options.animation),c.cleanse(),c.animate(b)},animate:function(a){this.element.addClass("animated"),this.element.addClass(this.queue[0]),this.element.data("animo",this.queue[0]);for(var b=this.prefixes.length;b--;)this.element.css(this.prefixes[b]+"animation-duration",this.options.duration+"s"),this.element.css(this.prefixes[b]+"animation-iteration-count",this.options.iterate),this.element.css(this.prefixes[b]+"animation-timing-function",this.options.timing);var c=this,d=a;c.queue.length>1&&(d=null),this._end("AnimationEnd",function(){c.element.hasClass(c.queue[0])&&(c.options.keep||c.cleanse(),c.queue.shift(),c.queue.length&&c.animate(a))},d)},cleanse:function(){this.element.removeClass("animated"),this.element.removeClass(this.queue[0]),this.element.removeClass(this.element.data("animo"));for(var a=this.prefixes.length;a--;)this.element.css(this.prefixes[a]+"animation-duration",""),this.element.css(this.prefixes[a]+"animation-iteration-count",""),this.element.css(this.prefixes[a]+"animation-timing-function",""),this.element.css(this.prefixes[a]+"transition",""),this.element.css(this.prefixes[a]+"transform",""),this.element.css(this.prefixes[a]+"filter","")},_blur:function(c){if(this.element.is("img")){var d="svg_"+(16777216*(1+Math.random())|0).toString(16).substring(1),e="filter_"+(16777216*(1+Math.random())|0).toString(16).substring(1);a("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" id="'+d+'" style="height:0;position:absolute;top:-1000px;"><filter id="'+e+'"><feGaussianBlur stdDeviation="'+this.options.amount+'" /></filter></svg>');for(var f=this.prefixes.length;f--;)this.element.css(this.prefixes[f]+"filter","blur("+this.options.amount+"px)"),this.element.css(this.prefixes[f]+"transition",this.options.duration+"s all linear");this.element.css("filter","url(#"+e+")"),this.element.data("svgid",d)}else{for(var g=this.element.css("color"),f=this.prefixes.length;f--;)this.element.css(this.prefixes[f]+"transition","all "+this.options.duration+"s linear");this.element.css("text-shadow","0 0 "+this.options.amount+"px "+g),this.element.css("color","transparent")}this._end("TransitionEnd",null,c);var h=this;if(this.options.focusAfter)var i=b.setTimeout(function(){h._focus(),i=b.clearTimeout(i)},1e3*this.options.focusAfter)},_focus:function(){var b=this.prefixes.length;if(this.element.is("img")){for(;b--;)this.element.css(this.prefixes[b]+"filter",""),this.element.css(this.prefixes[b]+"transition","");var c=a("#"+this.element.data("svgid"));c.remove()}else{for(;b--;)this.element.css(this.prefixes[b]+"transition","");this.element.css("text-shadow",""),this.element.css("color","")}},_rotate:function(a){for(var b=this.prefixes.length;b--;)this.element.css(this.prefixes[b]+"transition","all "+this.options.duration+"s linear"),this.element.css(this.prefixes[b]+"transform","rotate("+this.options.degrees+"deg)");this._end("TransitionEnd",null,a)},_end:function(a,b,c){var d=this,e=a.toLowerCase()+" webkit"+a+" o"+a+" MS"+a;this.element.bind(e,function(){d.element.unbind(e),"function"==typeof b&&b(),"function"==typeof c&&c(d)})}},a.fn.animo=function(a,b,d){return this.each(function(){new c(this,a,b,d)})}}(jQuery,window,document);var hchart=null;$(function(){function a(a){$("#moralityRst").text(c[Math.floor(a.morality)]),$("#intelligenceRst").text(d[Math.floor(a.intelligence)]),$("#shapeRst").text(e[Math.floor(a.shape)]),$("#lookRst").text(f[Math.floor(a.look)]),$("#careerRst").text(g[Math.floor(a.career)])}function b(a){$("#plusone").css({top:a.pageY-10,left:a.pageX}).show().animo({animation:"fadeOutUp",duration:.5},function(){$("#plusone").hide()});var b=$(this).text().split(" x ");2===b.length&&parseInt(b[1])&&$(this).text(b[0]+" x "+(parseInt(b[1])+1)),$.post("http://api.xingwu.me/proposal/add_comment",{id:"me",comment:b[0]})}var c=["作奸犯科","坑蒙拐骗","睚眦必报","光风霁月","浩然正气","德高望重"],d=["基本弱智","憨头憨脑","聪明伶俐","大巧若拙","IQ 150","万中无一"],e=["嘻！武大郎","潘长江","郭德纲","穿衣显瘦","脱衣有肉","孙杨"],f=["嘿！武大郎","王宝强","葛优","梁朝伟","金城武","吴彦祖"],g=["饥寒交迫","流离失所","家徒四壁","生活无忧","前途无量","富甲一方"];$.getJSON("http://api.xingwu.me/proposal/get_score/me",function(b){$("#radar").highcharts({chart:{polar:!0,type:"area",height:"150",events:{load:function(){hchart=this}}},title:{text:null},pane:{size:"95%"},xAxis:{categories:["德","智","体","美","劳"],tickmarkPlacement:"on",lineWidth:0,labels:{enabled:!0,distance:5}},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0,max:5,showFirstLabel:!1},tooltip:{shared:!0,pointFormat:'<span style="color:{series.color}">{series.name}: <b>{point.y:,.3f}</b><br/>'},legend:{enabled:!1},credits:{enabled:!1},navigation:{buttonOptions:{enabled:!1}},exporting:{enabled:!1},series:[{name:"平均评分",data:[b.data.morality,b.data.intelligence,b.data.shape,b.data.look,b.data.career]}]}),a(b.data)}),$.getJSON("http://api.xingwu.me/proposal/get_comments/me",function(a){if(0===a.ret){var c=new Rainbow;c.setSpectrum("#a3a3a3","#d9534f");var d=null;$.each(a.data,function(a,b){d||(d=b,c.setNumberRange(0,b));var e=$("<span>",{"class":"label tag"});e.css({"background-color":"#"+c.colorAt(b)}),e.text(a+" x "+b),e.appendTo("#comments")})}$(".tag").on("click",b)}),$("#morality").slider(),$("#morality").on("slideStop",function(a){$("#moralityLabel").text(c[a.value])}),$("#intelligence").slider(),$("#intelligence").on("slideStop",function(a){$("#intelligenceLabel").text(d[a.value])}),$("#shape").slider(),$("#shape").on("slideStop",function(a){$("#shapeLabel").text(e[a.value])}),$("#look").slider(),$("#look").on("slideStop",function(a){$("#lookLabel").text(f[a.value])}),$("#career").slider(),$("#career").on("slideStop",function(a){$("#careerLabel").text(g[a.value])}),$("#radar-form").submit(function(b){b.preventDefault();var c={id:$("#scoreId").val(),morality:parseInt($("#morality").val()),intelligence:parseInt($("#intelligence").val()),shape:parseInt($("#shape").val()),look:parseInt($("#look").val()),career:parseInt($("#career").val())};$.post("http://api.xingwu.me/proposal/set_score",c),$("#myModal").modal("hide"),hchart.series.length>1?hchart.series[1].setData([c.morality,c.intelligence,c.shape,c.look,c.career]):hchart.addSeries({name:"您的评分",data:[c.morality,c.intelligence,c.shape,c.look,c.career],color:"#eb685a"}),$.getJSON("http://api.xingwu.me/proposal/get_score/me",function(b){var c=b.data;hchart.series[0].setData([c.morality,c.intelligence,c.shape,c.look,c.career]),a(b.data)})}),$("#comment-form").submit(function(){event.preventDefault(),$.post("http://api.xingwu.me/proposal/add_comment",{id:"me",comment:$("#textField").val()}),$("#tagBox").modal("hide");var a=$("<span>",{"class":"label label-warning tag"});a.text($("#textField").val()+" x 1"),a.on("click",b),a.appendTo("#comments")})});var imgUrl="http:/http://api.xingwu.me/proposal.xingwu.me/images/wx.jpg",lineLink="http:/http://api.xingwu.me/proposal.xingwu.me",descContent="没想到伍行求婚的对象竟然是...？朋友们进来点个祝福吧:)",shareTitle="程序员有特别的求婚姿势：伍行向她求婚啦，进来点个祝福吧！",appid="";document.addEventListener("WeixinJSBridgeReady",function(){WeixinJSBridge.on("menu:share:appmessage",function(){shareFriend()}),WeixinJSBridge.on("menu:share:timeline",function(){shareTimeline()}),WeixinJSBridge.on("menu:share:weibo",function(){shareWeibo()})},!1),function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-43935113-2","auto"),ga("send","pageview");
